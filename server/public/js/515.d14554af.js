"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[515],{5928:function(e,t,r){r.r(t),r.d(t,{default:function(){return $}});var c=r(3625),a=r(3381),s=r(5893),l=r(5255),n=r(2667),i=r(6530),u=r(837),o=r(3749),d=r(3240),y=r(9088),m=r(7894),h=r(2515),f=r(9007),b=function(){var e=this,t=e._self._c;return t("div",[t(c.Z,{attrs:{flat:""}},[t(m.Z,{attrs:{justify:"center"}},[t(o.Z,{attrs:{persistent:"","max-width":"900px"},scopedSlots:e._u([{key:"activator",fn:function({on:r,attrs:c}){return[t(h.Z),t(a.Z,e._g(e._b({attrs:{color:"primary",dark:"",icon:""},on:{click:e.newcurrency}},"v-btn",c,!1),r),[t(y.Z,[e._v("mdi-plus-circle")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(s.Z,[t(l.EB,[e.editedMode?t("span",{staticClass:"text-h5"},[e._v("Edit currency")]):t("span",{staticClass:"text-h5"},[e._v("Tambah currency")])]),t(l.ZB,[t(i.Z,[t(d.Z,{ref:"form",attrs:{"lazy-validation":""}},[t(f.Z,{attrs:{rules:[e=>!!e||"Code is required"],label:"Code",required:""},model:{value:e.currency.code,callback:function(t){e.$set(e.currency,"code",t)},expression:"currency.code"}}),t(f.Z,{attrs:{rules:[e=>!!e||"Description is required"],label:"Desc",required:""},model:{value:e.currency.desc,callback:function(t){e.$set(e.currency,"desc",t)},expression:"currency.desc"}}),t(f.Z,{attrs:{label:"Symbol"},model:{value:e.currency.symbol,callback:function(t){e.$set(e.currency,"symbol",t)},expression:"currency.symbol"}}),t(f.Z,{attrs:{label:"Countr"},model:{value:e.currency.country,callback:function(t){e.$set(e.currency,"country",t)},expression:"currency.country"}}),t(f.Z,{attrs:{label:"Rate"},model:{value:e.currency.rate,callback:function(t){e.$set(e.currency,"rate",t)},expression:"currency.rate"}}),t(n.Z,{attrs:{label:"Default"},model:{value:e.currency.default,callback:function(t){e.$set(e.currency,"default",t)},expression:"currency.default"}})],1)],1),t("small",[e._v("*masukan data dengan benar")])],1),t(l.h7,[t(h.Z),t(a.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialog}},[e._v(" Close ")]),t(a.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.savecurrency(e.editedMode)}}},[e._v(" Save ")])],1)],1)],1)],1)],1),t(i.Z,{staticClass:"grey lighten-5 mb-6"},[t(u.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.Currencies,"items-per-page":10},scopedSlots:e._u([{key:"item.rate",fn:function({item:r}){return[t(f.Z,{attrs:{rounded:""},model:{value:r.rate,callback:function(t){e.$set(r,"rate",t)},expression:"item.rate"}})]}},{key:"item.default",fn:function({item:r}){return[t(n.Z,{model:{value:r.default,callback:function(t){e.$set(r,"default",t)},expression:"item.default"}})]}},{key:"item.actions",fn:function({item:r}){return[t(y.Z,{attrs:{small:""},on:{click:function(t){return e.retrieveRates(r.code,r)}}},[e._v("mdi-currency-twd")]),t(y.Z,{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editcurrency(r.id)}}},[e._v("mdi-pencil")]),t(y.Z,{attrs:{small:""},on:{click:function(t){return e.deletecurrency(r.id)}}},[e._v("mdi-delete")])]}}],null,!0)})],1)],1)},g=[],v=r(3390);class p{getAll(){return v.Z.get("/currencies")}get(e){return v.Z.get(`/currencies/${e}`)}create(e){return v.Z.post("/currencies",e)}update(e,t){return v.Z.put(`/currencies/${e}`,t)}delete(e){return v.Z["delete"](`/currencies/${e}`)}deleteAll(){return v.Z["delete"]("/currencies")}findByLabel(e){return v.Z.get(`/currencies?descs=${e}`)}getExchangeRate(){const e=v.Z.get("/rates");return e}}var Z=new p,k={data:()=>({dialog:!1,dialogTitle:"",btnTitle:"",submitted:!1,editedMode:void 0,headers:[{text:"Code",align:"start",value:"code",class:"primary"},{text:"Desc",value:"desc",class:"primary"},{text:"Symbol",value:"symbol",sortable:!1,class:"primary"},{text:"Country",value:"country",class:"primary"},{text:"Rate",value:"rate",class:"primary"},{text:"Default",value:"default",class:"primary"},{text:"Actions",value:"actions",sortable:!1,class:"primary"}],Currencies:[],currency:{code:"",desc:"",symbol:"",country:"",rate:"",default:!1}}),mounted(){this.retrieveCurrencies()},methods:{retrieveCurrencies(){Z.getAll().then((e=>{this.Currencies=e.data.currencies.map(this.getDisplayCurrencies)})).catch((e=>{console.log(e)}))},refreshList(){this.retrieveCurrencies()},getDisplayCurrencies(e){return{id:e.id,code:e.code,desc:e.desc,symbol:e.symbol,country:e.country,rate:e.rate,default:e.default}},retrieveRates(e,t){Z.getExchangeRate().then((r=>{var c=r.data.filter((t=>t.mata_uang==e)),a={code:t.code,desc:t.desc,symbol:t.symbol,country:t.country,rate:parseFloat(c[0].eRate.eRate_beli),default:t.default};Z.update(t.id,a).then((e=>{this.refreshList(),console.log(e.data.message)}))})).catch((e=>{console.log(e)}))},savecurrency(e){var t={code:this.currency.code,desc:this.currency.desc,symbol:this.currency.symbol,country:this.currency.country,rate:this.currency.rate,default:this.currency.default};console.log(t),e?Z.update(e,t).then((e=>{console.log(e.data.message),this.refreshList(),this.closeDialog()})).catch((e=>{console.log(e)})):Z.create(t).then((e=>{console.log(e.data),this.submitted=!0,this.refreshList(),this.clearcurrency(),this.closeDialog()})).catch((e=>{console.log(e)}))},editcurrency(e){this.editedMode=e,Z.get(e).then((e=>{this.currency={code:e.data.code,desc:e.data.desc,symbol:e.data.symbol,country:e.data.country,rate:e.data.rate,default:e.data.default},this.dialog=!0})).catch((e=>{console.log(e)}))},deletecurrency(e){Z["delete"](e).then((()=>{this.refreshList()})).catch((e=>{console.log(e)}))},newcurrency(){this.submitted=!1,this.dialog=!0,this.clearcurrency()},clearcurrency(){this.currency={code:"",desc:"",symbol:"",country:"",rate:"",default:!1}},closeDialog(){this.dialog=!1,this.editedMode=void 0,this.clearcurrency()}}},x=k,C=r(1001),_=(0,C.Z)(x,b,g,!1,null,null,null),$=_.exports}}]);
//# sourceMappingURL=515.d14554af.js.map